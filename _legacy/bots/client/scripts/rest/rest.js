import { serverAddress } from '../settings';
export function joinUrl(...parts) {
    return parts.join('');
    // return urljoin(...parts)
}
export function sendPlain(path, method, data, headers) {
    const url = joinUrl(serverAddress, path);
    return fetch(url, {
        method,
        headers: Object.assign({ 'Content-Type': 'application/json' }, headers),
        body: JSON.stringify(data)
    });
}
export async function send(path, method, data, headers) {
    const res = await sendPlain(path, method, data, headers);
    const json = await res.json();
    if (!json.ok)
        throw new Error(json.error);
    return json.data;
}
export async function get(path, data) {
    return await send(path, 'GET', data);
}
export async function post(path, data) {
    return await send(path, 'POST', data);
}
export async function put(path, data) {
    return await send(path, 'PUT', data);
}
export async function del(path, data) {
    return await send(path, 'DELETE', data);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGFBQWEsQ0FBQTtBQUszQyxNQUFNLGtCQUFrQixHQUFHLEtBQWU7SUFDekMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUE7SUFDckIsMkJBQTJCO0FBQzVCLENBQUM7QUFFRCxNQUFNLG9CQUFvQixJQUFZLEVBQUUsTUFBYyxFQUFFLElBQVUsRUFBRSxPQUFhO0lBQ2hGLE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLENBQUE7SUFDeEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUU7UUFDakIsTUFBTTtRQUNOLE9BQU8sa0JBQ04sY0FBYyxFQUFFLGtCQUFrQixJQUMvQixPQUFPLENBQ1Y7UUFDRCxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUM7S0FDMUIsQ0FBQyxDQUFBO0FBQ0gsQ0FBQztBQUVELE1BQU0sQ0FBQyxLQUFLLGVBQWtELElBQVksRUFBRSxNQUFjLEVBQUUsSUFBVSxFQUFFLE9BQWE7SUFDcEgsTUFBTSxHQUFHLEdBQUcsTUFBTSxTQUFTLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUE7SUFDeEQsTUFBTSxJQUFJLEdBQXFCLE1BQU0sR0FBRyxDQUFDLElBQUksRUFBRSxDQUFBO0lBQy9DLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztRQUNaLE1BQU0sSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFBO0lBQzVCLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0FBQ2xCLENBQUM7QUFFRCxNQUFNLENBQUMsS0FBSyxjQUFpRCxJQUFZLEVBQUUsSUFBVTtJQUNwRixNQUFNLENBQUMsTUFBTSxJQUFJLENBQUksSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQTtBQUN4QyxDQUFDO0FBRUQsTUFBTSxDQUFDLEtBQUssZUFBa0QsSUFBWSxFQUFFLElBQVU7SUFDckYsTUFBTSxDQUFDLE1BQU0sSUFBSSxDQUFJLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUE7QUFDekMsQ0FBQztBQUVELE1BQU0sQ0FBQyxLQUFLLGNBQWlELElBQVksRUFBRSxJQUFVO0lBQ3BGLE1BQU0sQ0FBQyxNQUFNLElBQUksQ0FBSSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFBO0FBQ3hDLENBQUM7QUFFRCxNQUFNLENBQUMsS0FBSyxjQUFpRCxJQUFZLEVBQUUsSUFBVTtJQUNwRixNQUFNLENBQUMsTUFBTSxJQUFJLENBQUksSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQTtBQUMzQyxDQUFDIn0=